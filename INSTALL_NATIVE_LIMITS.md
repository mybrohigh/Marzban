# üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Marzban —Å —Å–∏—Å—Ç–µ–º–æ–π –ª–∏–º–∏—Ç–æ–≤ (–±–µ–∑ Docker)

## üìã –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:

### ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤:**
- üìä **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - SQLite —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- üéõÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - CRUD API –¥–ª—è –ª–∏–º–∏—Ç–æ–≤
- üìã **–®–∞–±–ª–æ–Ω—ã** - Basic/Premium/Enterprise —Ç–∞—Ä–∏—Ñ—ã
- ‚ö° **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - email/telegram/webhook
- üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### üîÑ **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
1. **Docker —Ä–µ–∂–∏–º** - –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ `gozargah/marzban`
2. **Native —Ä–µ–∂–∏–º** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π –ª–∏–º–∏—Ç–æ–≤

## üõ†Ô∏è –°–ø–æ—Å–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

### **–°–ø–æ—Å–æ–± 1: –û–Ω–ª–∞–π–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π –ª–∏–º–∏—Ç–æ–≤
sudo bash -c "$(curl -sL https://github.com/mybrohigh/Marzban/raw/master/install_marzban_with_limits.sh)" @ install --native

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (–±–µ–∑ –ª–∏–º–∏—Ç–æ–≤)
sudo bash -c "$(curl -sL https://github.com/mybrohigh/Marzban/raw/master/marzban.sh)" @ install
```

### **–°–ø–æ—Å–æ–± 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**
```bash
# 1. –°–∫–∞—á–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
curl -O install_marzban_with_limits.sh \
  https://github.com/mybrohigh/Marzban/raw/master/install_marzban_with_limits.sh

# 2. –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x install_marzban_with_limits.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
sudo ./install_marzban_with_limits.sh install --native
```

### **–°–ø–æ—Å–æ–± 3: –ò–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞**
```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/mybrohigh/Marzban.git
cd Marzban

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å native —É—Å—Ç–∞–Ω–æ–≤–∫—É
sudo bash marzban.sh install --native
```

## üéØ –ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:

### **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ **Python 3.12** —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
- ‚úÖ **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ **Systemd —Å–µ—Ä–≤–∏—Å** –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- ‚úÖ **Nginx** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–ª—è reverse proxy
- ‚úÖ **Log rotation** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∞–º–∏

### **–§–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
```
/opt/marzban/                    # –æ—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
‚îú‚îÄ‚îÄ venv/                         # Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ app.db                         # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îú‚îÄ‚îÄ .env                           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ marzban.sh                     # –°–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python

/var/lib/marzban/                  # –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ app.db                         # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ xray_config.json               # –ö–æ–Ω—Ñ–∏–≥ Xray
‚îî‚îÄ‚îÄ logs/                          # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

/etc/systemd/system/marzban.service  # Systemd —Å–µ—Ä–≤–∏—Å
/etc/logrotate.d/marzban              # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
```

### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env):**
```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
SQLALCHEMY_DATABASE_URL=sqlite:///var/lib/marzban/app.db

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
DEBUG=false
UVICORN_HOST=0.0.0.0.0
UVICORN_PORT=8000

# –°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤
LIMITS_MONITOR_ENABLED=true
LIMITS_CHECK_INTERVAL=300
LIMITS_NOTIFICATION_THRESHOLD=0.8

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
JWT_SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
ADMIN_USERNAME=admin
ADMIN_PASSWORD=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π_–ø–∞—Ä–æ–ª—å
```

## üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status marzban

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u marzban -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart marzban

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo systemctl stop marzban

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo bash /opt/marzban/marzban.sh update

# –£–¥–∞–ª–µ–Ω–∏–µ
sudo bash /opt/marzban/marzban.sh uninstall
```

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞–º–∏:**
```bash
# –î–æ—Å—Ç—É–ø –∫ CLI
sudo /opt/marzban/venv/bin/python /opt/marzban/main.py cli

# –ò–ª–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
http://your-server:8000
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Docker —Ä–µ–∂–∏–º | Native —Ä–µ–∂–∏–º |
|---------------|-------------|-------------|
| –£—Å—Ç–∞–Ω–æ–≤–∫–∞ | 1 –∫–æ–º–∞–Ω–¥–∞ | 1 –∫–æ–º–∞–Ω–¥–∞ |
| –†–µ—Å—É—Ä—Å—ã | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –°–∏—Å—Ç–µ–º–∞ |
| –ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å | –í—ã—Å–æ–∫–∞—è | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | –í–Ω—É—Ç—Ä–∏ | –í–Ω–µ—à–Ω—è—è |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | .env | .env |
| –õ–∏–º–∏—Ç—ã | –ë–∞–∑–æ–≤—ã–µ | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ |

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Native —Ä–µ–∂–∏–º–∞:

### **–î–ª—è –±–∏–∑–Ω–µ—Å–∞:**
- üí∞ **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞—Ç–∏–≤–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
- üîß **–ì–∏–±–∫–æ—Å—Ç—å** - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- üíæ **–ë—ç–∫–∞–ø—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î

### **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è:**
- üéõÔ∏è **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - real-time –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ
- üìã **–®–∞–±–ª–æ–Ω—ã** - –±—ã—Å—Ç—Ä–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- üîç **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
- ‚öôÔ∏è **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - webhook –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

### **–°–∏—Å—Ç–µ–º–Ω—ã–µ:**
- Ubuntu 18.04+ / Debian 10+ / CentOS 8+ / Fedora 35+
- –ú–∏–Ω–∏–º—É–º 2GB RAM
- –ú–∏–Ω–∏–º—É–º 10GB –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

### **–°–µ—Ç–µ–≤—ã–µ:**
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 8000
- –î–æ—Å—Ç—É–ø –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:

**–£ –≤–∞—Å –µ—Å—Ç—å –≤—ã–±–æ—Ä:**
1. **Docker —Ä–µ–∂–∏–º** - –ø—Ä–æ—Å—Ç–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ
2. **Native —Ä–µ–∂–∏–º** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

**–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–µ!** –í—ã–±–∏—Ä–∞–π—Ç–µ –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏.
