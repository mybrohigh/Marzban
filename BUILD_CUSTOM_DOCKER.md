# üê≥ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Docker –æ–±—Ä–∞–∑–∞ —Å —Å–∏—Å—Ç–µ–º–æ–π –ª–∏–º–∏—Ç–æ–≤

## üìã –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ Docker:

### ‚úÖ **Dockerfile –æ–±–Ω–æ–≤–ª–µ–Ω:**
```dockerfile
# –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ª–∏–º–∏—Ç–æ–≤
RUN pip install --no-cache-dir aiohttp sqlalchemy alembic

# –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
CMD ["bash", "-c", "alembic upgrade head; python main.py"]
```

### ‚úÖ **requirements.txt –¥–æ–ø–æ–ª–Ω–µ–Ω:**
```txt
# –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ª–∏–º–∏—Ç–æ–≤ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
aiohttp==3.9.1
```

## üöÄ –ö–∞–∫ —Å–æ–±—Ä–∞—Ç—å —Å–≤–æ–π –æ–±—Ä–∞–∑:

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞**
```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–µ—Ç–∫—É —Å –ª–∏–º–∏—Ç–∞–º–∏
git checkout new-branch

# 2. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker build -t mybrohigh/marzban:latest .

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d
```

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ GitHub**
```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Docker Hub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
# –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: https://hub.docker.com
# –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: mybrohigh/marzban

# 2. –î–æ–±–∞–≤–∏—Ç—å GitHub Secrets
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ: Settings ‚Üí Secrets and variables ‚Üí Actions
DOCKERHUB_USERNAME=mybrohigh
DOCKERHUB_TOKEN=your_dockerhub_token
GITHUB_TOKEN=your_github_token

# 3. –ó–∞–ø—É—à–∏—Ç—å –≤ GitHub (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞)
git push origin new-branch
```

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑**
```bash
# 1. –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ Docker Hub
docker pull mybrohigh/marzban:latest

# 2. –û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml
image: mybrohigh/marzban:latest

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d
```

## üîß –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ –æ–±—Ä–∞–∑ —Å –ª–∏–º–∏—Ç–∞–º–∏:

### **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
user_limits           - –ª–∏–º–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
limit_templates       - —à–∞–±–ª–æ–Ω—ã —Ç–∞—Ä–∏—Ñ–æ–≤
limit_violations     - –∏—Å—Ç–æ—Ä–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π
limit_notifications   - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

### **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
```bash
GET  /api/limits/templates              # –ø–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω—ã
POST /api/limits/users/{username}     # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã
GET  /api/limits/users/{username}     # –ø–æ–ª—É—á–∏—Ç—å –ª–∏–º–∏—Ç—ã
GET  /api/limits/stats               # —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### **–§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–∏–º–∏—Ç—ã –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ 80% –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –Ω–∞—Ä—É—à–µ–Ω–∏–π
```

### **Dashboard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```tsx
// AdminLimitsModal - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞–º–∏
// DashboardEnhanced - —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ª–∏–º–∏—Ç–æ–≤
// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤:

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –û—Ä–∏–≥–∏–Ω–∞–ª (gozargah) | –í–∞—à (mybrohigh) |
|---------------|------------------------|------------------|
| –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | ‚úÖ | ‚úÖ |
| –°–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤ | ‚ùå | ‚úÖ |
| –®–∞–±–ª–æ–Ω—ã —Ç–∞—Ä–∏—Ñ–æ–≤ | ‚ùå | ‚úÖ |
| –ê–≤—Ç–æ-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚ùå | ‚úÖ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 24/7 | ‚ùå | ‚úÖ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤ | ‚ùå | ‚úÖ |
| Statistics API | –ë–∞–∑–æ–≤–∞—è | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è |

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤–∞—à–µ–≥–æ –æ–±—Ä–∞–∑–∞:

### **–î–ª—è –±–∏–∑–Ω–µ—Å–∞:**
- üí∞ **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è** - —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã Basic/Premium/Enterprise
- üìà **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚ö° **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - email/telegram/webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- üì± **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –≤–∏–¥—è—Ç —Å–≤–æ–∏ –ª–∏–º–∏—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è** - –∑–∞ 20% –¥–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è
- üîÑ **–ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ** - –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Ç–∞—Ä–∏—Ñ
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∏—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:**
- üéõÔ∏è **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –º–∞—Å—Å–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- üìã **–®–∞–±–ª–æ–Ω—ã** - –±—ã—Å—Ç—Ä–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- üîç **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π
- ‚öôÔ∏è **–ì–∏–±–∫–æ—Å—Ç—å** - –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
# 1. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ
docker build -t mybrohigh/marzban:test .

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è —Ç–µ—Å—Ç–∞
docker run -d --name marzban-test \
  -p 8000:8000 \
  -v /var/lib/marzban-test:/var/lib/marzban \
  mybrohigh/marzban:test

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl http://localhost:8000/api/limits/templates
```

### **–ü—Ä–æ–¥–∞–∫—à–µ–Ω:**
```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Docker Hub –∏ GitHub Actions
# 2. –°–æ–±—Ä–∞—Ç—å —á–µ—Ä–µ–∑ CI/CD –ø–∞–π–ø–ª–∞–π–Ω
# 3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker-compose up -d
```

## üìù –†–µ–∑—É–ª—å—Ç–∞—Ç:

–£ –≤–∞—Å –µ—Å—Ç—å **Docker –æ–±—Ä–∞–∑ —Å –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –ª–∏–º–∏—Ç–æ–≤** –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º** —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º Marzban
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω** —Å–∏—Å—Ç–µ–º–æ–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞–º–∏
- ‚úÖ **–ì–æ—Ç–æ–≤** –∫ –±–∏–∑–Ω–µ—Å-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º** –¥–ª—è —Ç—ã—Å—è—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** –≤—Å–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ü—Ä–æ—Å—Ç–æ —Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ!** üéâ
